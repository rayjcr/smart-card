{"version":3,"sources":["webpack:///src/views/order.vue","webpack:///./src/views/order.vue?66ec","webpack:///./src/views/order.vue"],"names":["order","data","orderList","orderTotle","orderLimit","orderCurPage","userName","className","countDown","timeoutObj","mounted","this","init","$refs","scrollOrder","addEventListener","checkScroll","destroyed","clearTimeout","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","window","localStorage","getItem","countDownTime","countDownInterval","getOrderList","stop","_this2","setTimeout","_this3","_callee2","param","res","_context2","limit","page","userCode","api","sent","value","totalCount","push","apply","dataList","backMall","$router","path","statusStr","num","_this4","$nextTick","scrollTop","boxHeight","clientHeight","scrollHeight","Math","ceil","views_order","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","_s","_m","ref","attrs","cellspacing","cellpadding","_l","item","index","key","width","createTime","goodsName","price","domProps","innerHTML","status","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"kMAyCAA,GACAC,KADA,WAEA,OACAC,aACAC,WAAA,EACAC,WAAA,EACAC,aAAA,EACAC,SAAA,GACAC,UAAA,GACAC,UAAA,EACAC,WAAA,OAGAC,QAbA,WAcAC,KAAAC,OACAD,KAAAE,MAAAC,YAAAC,iBAAA,SAAAJ,KAAAK,cAEAC,UAjBA,WAkBAC,aAAAP,KAAAF,aAEAU,SACAP,KADA,WACA,IAAAQ,EAAAT,KAAA,OAAAU,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACAT,EAAAd,SAAAwB,OAAAC,aAAAC,QAAA,iBACAZ,EAAAb,UAAAuB,OAAAC,aAAAC,QAAA,aAEAZ,EAAAZ,UAAAsB,OAAAG,cACAb,EAAAc,oBAEAd,EAAAe,eAPA,wBAAAR,EAAAS,SAAAX,EAAAL,KAAAC,IASAa,kBAVA,WAUA,IAAAG,EAAA1B,KACAA,KAAAF,WAAA6B,WAAA,WACAD,EAAA7B,YACA6B,EAAA7B,UAAA,GACA6B,EAAAH,qBAIA,MAEAC,aApBA,WAoBA,IAAAI,EAAA5B,KAAA,OAAAU,IAAAC,EAAAC,EAAAC,KAAA,SAAAgB,IAAA,IAAAC,EAAAC,EAAA,OAAApB,EAAAC,EAAAG,KAAA,SAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,cACAY,MACAG,MAAAL,EAAAnC,WACAqC,EAAAI,KAAAN,EAAAlC,aACAoC,EAAAK,SAAAhB,OAAAC,aAAAC,QAAA,iBAJAW,EAAAd,KAAA,EAMAkB,EAAA,EAAAN,GANA,OAMAC,EANAC,EAAAK,KAOAT,EAAApC,WAAAuC,EAAAO,MAAAC,WACAX,EAAArC,UAAAiD,KAAAC,MAAAb,EAAArC,UAAAwC,EAAAO,MAAAI,UACAd,EAAAvB,cATA,yBAAA2B,EAAAP,SAAAI,EAAAD,KAAAlB,IAYAiC,SAhCA,WAiCA3C,KAAA4C,QAAAJ,MAAAK,KAAA,UAEAC,UAnCA,SAmCAC,GACA,OAAAA,GACA,OACA,wCACA,OACA,wCACA,OACA,0CAGA1C,YA7CA,WA6CA,IAAA2C,EAAAhD,KACAA,KAAAiD,UAAA,WACA,IAAAC,EAAAF,EAAA9C,MAAAC,YAAA+C,UACAC,EAAAH,EAAA9C,MAAAC,YAAAiD,aACAC,EAAAL,EAAA9C,MAAAC,YAAAkD,aAKAL,EAAAtD,aAAA4D,KAAAC,KAAAP,EAAAxD,WAAAwD,EAAAvD,aAAAyD,EAAAC,EAAA,GAAAE,IACAL,EAAAtD,eAEAsD,EAAAxB,qBCnHegC,GADEC,OAFjB,WAA0B,IAAAC,EAAA1D,KAAa2D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,qBAA+BF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,WAAAC,IAA2BC,MAAAP,EAAAf,YAAsBe,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAA2CE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,SAAmBF,EAAA,QAAAH,EAAAQ,GAAAR,EAAAS,GAAAT,EAAA/D,aAAAkE,EAAA,QAAAH,EAAAQ,GAAAR,EAAAS,GAAAT,EAAA9D,cAAAiE,EAAA,QAAAH,EAAAQ,GAAA,MAAAR,EAAAS,GAAAT,EAAA7D,WAAA,cAAA6D,EAAAQ,GAAA,KAAAL,EAAA,OAAyKE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,aAAuBL,EAAAQ,GAAA,MAAAL,EAAA,QAAAH,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAlE,eAAAkE,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAkGE,YAAA,eAAyBL,EAAAU,GAAA,GAAAV,EAAAQ,GAAA,KAAAL,EAAA,OAAkCQ,IAAA,cAAAN,YAAA,cAA0CF,EAAA,OAAYQ,IAAA,YAAAN,YAAA,aAAuCF,EAAA,SAAcE,YAAA,YAAAO,OAA+BC,YAAA,IAAAC,YAAA,MAAqCd,EAAAe,GAAAf,EAAA,mBAAAgB,EAAAC,GAA6C,OAAAd,EAAA,MAAgBe,IAAAD,IAAUd,EAAA,MAAWS,OAAOO,MAAA,SAAenB,EAAAQ,GAAAR,EAAAS,GAAAO,EAAAI,eAAApB,EAAAQ,GAAA,KAAAL,EAAA,MAAyDS,OAAOO,MAAA,SAAenB,EAAAQ,GAAAR,EAAAS,GAAAO,EAAAK,cAAArB,EAAAQ,GAAA,KAAAL,EAAA,MAAwDS,OAAOO,MAAA,SAAenB,EAAAQ,GAAAR,EAAAS,GAAAO,EAAAM,UAAAtB,EAAAQ,GAAA,KAAAL,EAAA,MAAoDS,OAAOO,MAAA,OAAcI,UAAWC,UAAAxB,EAAAS,GAAAT,EAAAZ,UAAA4B,EAAAS,gBAAoD,cAE3xCC,iBADjB,WAAoC,IAAazB,EAAb3D,KAAa4D,eAA0BC,EAAvC7D,KAAuC8D,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,SAAmBE,YAAA,cAAwBF,EAAA,MAAAA,EAAA,MAAoBS,OAAOO,MAAA,SAArI7E,KAAoJkE,GAAA,QAApJlE,KAAoJkE,GAAA,KAAAL,EAAA,MAAsCS,OAAOO,MAAA,SAAjM7E,KAAgNkE,GAAA,QAAhNlE,KAAgNkE,GAAA,KAAAL,EAAA,MAAsCS,OAAOO,MAAA,SAA7P7E,KAA4QkE,GAAA,QAA5QlE,KAA4QkE,GAAA,KAAAL,EAAA,MAAsCS,OAAOO,MAAA,SAAzT7E,KAAwUkE,GAAA,eCG5W,IAcAmB,EAdyBC,EAAQ,OAcjCC,CACElG,EACAmE,GATF,EAXA,SAAAgC,GACEF,EAAQ,QACRA,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/2.e625715003cf64cb652a.js","sourcesContent":["<template>\r\n    <div class=\"mainFrame appabs\">\r\n        <div class=\"frameHead\">\r\n            <div class=\"leftHead\">\r\n                <div class=\"backPage\" @click=\"backMall\">我的订单</div>\r\n            </div>\r\n            <div class=\"rightHead\">\r\n                <div class=\"info\"><span>{{userName}}</span><span>{{className}}</span><span>退出({{countDown}}s)</span></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"frameBody\">\r\n            <div class=\"orderSum\">共 <span>{{orderTotle}}</span> 个订单</div>\r\n            <div class=\"orderTable\">\r\n                <table class=\"tableHead\">\r\n                    <tr>\r\n                        <td width=\"30%\">时间</td>\r\n                        <td width=\"40%\">商品</td>\r\n                        <td width=\"10%\">勋章</td>\r\n                        <td width=\"20%\">状态</td>\r\n                    </tr>\r\n                </table>\r\n                <div class=\"tableMain\"  ref=\"scrollOrder\">\r\n                    <div class=\"fl wfull\" ref=\"orderList\">\r\n                        <table class=\"tableBody\" cellspacing='0' cellpadding='0'>\r\n                            <tr v-for=\"(item,index) in orderList\" :key=\"index\">\r\n                                <td width=\"30%\">{{item.createTime}}</td>\r\n                                <td width=\"40%\">{{item.goodsName}}</td>\r\n                                <td width=\"10%\">{{item.price}}</td>\r\n                                <td width=\"20%\" v-html=\"statusStr(item.status)\"></td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {setTokenTime,clearTime} from '@/utils/comm'\r\nimport * as api from '@/api/api';\r\nexport default {\r\n    data(){\r\n        return{\r\n            orderList:[],\r\n            orderTotle:0,\r\n            orderLimit:2,\r\n            orderCurPage:1,\r\n            userName:\"\",\r\n            className:\"\",\r\n            countDown:0,\r\n            timeoutObj:null,\r\n        }\r\n    },\r\n    mounted(){\r\n        this.init();\r\n        this.$refs.scrollOrder.addEventListener('scroll',this.checkScroll)\r\n    },\r\n    destroyed(){\r\n        clearTimeout(this.timeoutObj)\r\n    },\r\n    methods:{\r\n        async init(){\r\n            this.userName = window.localStorage.getItem(\"card_username\");\r\n            this.className = window.localStorage.getItem(\"className\");\r\n            // setTokenTime();\r\n            this.countDown = window.countDownTime\r\n            this.countDownInterval();\r\n\r\n            this.getOrderList();\r\n        },\r\n        countDownInterval(){\r\n            this.timeoutObj = setTimeout(()=>{\r\n                this.countDown--;\r\n                if(this.countDown>0){\r\n                    this.countDownInterval();\r\n                }else{\r\n                    // this.backHome();\r\n                }\r\n            },1000)\r\n        },\r\n        async getOrderList(){\r\n            let param = {}\r\n            param.limit = this.orderLimit;\r\n            param.page = this.orderCurPage;\r\n            param.userCode = window.localStorage.getItem(\"card_oauserid\");\r\n\r\n            let res = await api.getGoodsOrder(param);\r\n            this.orderTotle = res.value.totalCount;\r\n            this.orderList.push.apply(this.orderList,res.value.dataList);\r\n            this.checkScroll()\r\n            // console.log(res,\"res\")\r\n        },\r\n        backMall(){\r\n            this.$router.push({path:'mall'})\r\n        },\r\n        statusStr(num){\r\n            switch (num){\r\n                case 0:\r\n                    return  \"<span class='stat_1'>待领取</span>\"\r\n                case 1:\r\n                    return  \"<span class='stat_2'>已领取</span>\"\r\n                case -1:\r\n                    return  \"<span class='stat_3'>已退单</span>\"\r\n            }\r\n        },\r\n        checkScroll(){\r\n            this.$nextTick(() => {\r\n                let scrollTop = this.$refs.scrollOrder.scrollTop;\r\n                let boxHeight = this.$refs.scrollOrder.clientHeight;\r\n                let scrollHeight = this.$refs.scrollOrder.scrollHeight;\r\n                // console.log(scrollTop+boxHeight+40,\"A\")\r\n                // console.log(scrollHeight,\"B\")\r\n                // console.log(scrollTop+boxHeight+40>scrollHeight)\r\n\r\n                if(this.orderCurPage<Math.ceil(this.orderTotle/this.orderLimit)&&((scrollTop+boxHeight+40)>scrollHeight)){\r\n                    this.orderCurPage++;\r\n                    // console.log(this.orderCurPage,'this.orderCurPage')\r\n                    this.getOrderList();\r\n                }\r\n            })\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.fl{\r\n    float: left;\r\n}\r\n.wfull{\r\n    width: 100%;\r\n}\r\n.mainFrame{\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #EFF2F3FF;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.frameHead{\r\n    background: #754AEC;  \r\n    width: 100%;\r\n    height: .9rem;\r\n    .leftHead{\r\n        float: left;\r\n        margin: .23rem;\r\n        .backPage{\r\n            height: .44rem;\r\n            line-height: .44rem;\r\n            background: url(../assets/img/arrow-left.png) no-repeat left center;\r\n            font-size: .36rem;\r\n            color: #FFF;\r\n            padding-left: .55rem;\r\n        }\r\n    }\r\n    .rightHead{\r\n        float: right;\r\n        font-size: .34rem;\r\n        padding-right: .4rem;\r\n        font-size: .34rem;\r\n        color: #FFF;\r\n        line-height: .9rem;\r\n        .info{\r\n            span{\r\n                margin: 0 10px;\r\n            }\r\n        }\r\n        .exitUser{\r\n            font-size: .36rem;\r\n            color: #FFF;\r\n        }\r\n    }\r\n}\r\n.frameBody{\r\n    flex: 1;\r\n    padding: .4rem;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    .orderSum{\r\n        font-size: .48rem;\r\n        color: #262626;\r\n        font-weight: bold;\r\n        padding-bottom: .4rem;\r\n        line-height: .48rem;\r\n        span{\r\n            color: #33A5FF;\r\n        }\r\n    }\r\n    .orderTable{\r\n        width: 100%;\r\n        overflow: hidden;\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        .tableHead{\r\n            width: 100%;\r\n            height: 1rem;\r\n            line-height: 1rem;\r\n            background: #FFF;\r\n            border-bottom: 1px solid #f2f2f2;\r\n            font-size: .36rem;\r\n            color: #262626;\r\n            td{\r\n                padding-left: .2rem;\r\n                font-weight: bold;\r\n                border-collapse: collapse;\r\n            }\r\n        }\r\n        .tableMain{\r\n            flex: 1;\r\n            background: #FFF;\r\n            overflow: auto;\r\n            .tableBody{\r\n                width: 100%;\r\n                font-size: .26rem;\r\n                color: #262626;\r\n                tr:nth-child(even){\r\n                    background: #E7E9EB;\r\n                }\r\n                td{\r\n                    padding-left: .2rem;\r\n                    height: .8rem;\r\n                    line-height: .8rem;\r\n                    border-collapse: collapse;\r\n                    border: 0;\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</style>\r\n<style>\r\n.stat_1{\r\n    color: #33A5FFFF;\r\n}\r\n.stat_2{\r\n    color: #666666;\r\n}\r\n.stat_3{\r\n    color: #ff4200;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/order.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mainFrame appabs\"},[_c('div',{staticClass:\"frameHead\"},[_c('div',{staticClass:\"leftHead\"},[_c('div',{staticClass:\"backPage\",on:{\"click\":_vm.backMall}},[_vm._v(\"我的订单\")])]),_vm._v(\" \"),_c('div',{staticClass:\"rightHead\"},[_c('div',{staticClass:\"info\"},[_c('span',[_vm._v(_vm._s(_vm.userName))]),_c('span',[_vm._v(_vm._s(_vm.className))]),_c('span',[_vm._v(\"退出(\"+_vm._s(_vm.countDown)+\"s)\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"frameBody\"},[_c('div',{staticClass:\"orderSum\"},[_vm._v(\"共 \"),_c('span',[_vm._v(_vm._s(_vm.orderTotle))]),_vm._v(\" 个订单\")]),_vm._v(\" \"),_c('div',{staticClass:\"orderTable\"},[_vm._m(0),_vm._v(\" \"),_c('div',{ref:\"scrollOrder\",staticClass:\"tableMain\"},[_c('div',{ref:\"orderList\",staticClass:\"fl wfull\"},[_c('table',{staticClass:\"tableBody\",attrs:{\"cellspacing\":\"0\",\"cellpadding\":\"0\"}},_vm._l((_vm.orderList),function(item,index){return _c('tr',{key:index},[_c('td',{attrs:{\"width\":\"30%\"}},[_vm._v(_vm._s(item.createTime))]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"40%\"}},[_vm._v(_vm._s(item.goodsName))]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"10%\"}},[_vm._v(_vm._s(item.price))]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"20%\"},domProps:{\"innerHTML\":_vm._s(_vm.statusStr(item.status))}})])}),0)])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',{staticClass:\"tableHead\"},[_c('tr',[_c('td',{attrs:{\"width\":\"30%\"}},[_vm._v(\"时间\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"40%\"}},[_vm._v(\"商品\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"10%\"}},[_vm._v(\"勋章\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"20%\"}},[_vm._v(\"状态\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-44bbe032\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/order.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44bbe032\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./order.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44bbe032\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./order.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./order.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./order.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-44bbe032\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./order.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-44bbe032\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/order.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}