{"version":3,"sources":["webpack:///./src/router/_import_production.js","webpack:///src/App.vue","webpack:///./src/App.vue?9ec9","webpack:///./src/App.vue","webpack:///./src/store/modules/app.js","webpack:///./src/store/getters.js","webpack:///./src/store/index.js","webpack:///src/components/tips/tips.vue","webpack:///./src/components/tips/tips.vue?124b","webpack:///./src/components/tips/tips.vue","webpack:///./src/components/tips/index.js","webpack:///./src/components/index.js","webpack:///./src/main.js","webpack:///./src/views lazy ^\\.\\/.*\\.vue$","webpack:///./src/utils/fetch.js","webpack:///./src/api/api.js","webpack:///./src/router/index.js","webpack:///./src/utils/comm.js"],"names":["module","exports","file","__webpack_require__","App","name","data","timeSwipe","Object","timeSwallow","watch","$route","to","from","mounted","comm","window","require","ipcRenderer","send","e","console","log","this","getServer","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","api","sent","openPort","setTimeout","t0","stop","_this2","_callee2","_ref","_ref2","result1","result2","_context2","$LayerTips","content","time","promise_default","all","slicedToArray_default","resultCode","abrupt","initPolling","_this3","_callee5","_context5","clearInterval","setInterval","_callee3","_context3","isSwipeCard","_callee4","_context4","isSwallowCard","_this4","_callee6","res","_context6","localStorage","getItem","$router","currentRoute","path","indexOf","push","$store","getters","swipeState","dispatch","confirmExchange","checkUser","value","getStudentInfo","cardNo","_this5","_callee7","params","resObj","tokenRes","stuRes","_context7","JSON","parse","setItem","userCode","substr","length","avatar","schoolCode","xxdm","usercode","platform","status","studentId","classId","className","gradeId","_this6","_callee8","_context8","swallowState","getTokenTest","_this7","_callee9","usercode_t","_context9","replace","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","normalizeComponent","ssrContext","app","state","machineState","swipeComplete","swallowComplete","errorState","checkComplete","mutations","Set_SwipeState","view","Set_SwallowState","Set_MachineState","Set_SwallowComplete","Set_SwipeComplete","Set_ErrorState","Set_ConfirmExchange","Set_CheckComplete","actions","SetSwipeState","commit","SetSwallowState","SetMachineState","_ref3","SetSwipeComplete","_ref4","SetSwallowComplete","_ref5","SetErrorState","_ref6","SetConfirmExchange","_ref7","SetCheckComplete","_ref8","Vue","use","Vuex","store","Store","modules","tips","visible","close","handleAfterLeave","$destroy","$el","parentNode","removeChild","tips_tips","staticClass","on","after-leave","directives","rawName","expression","domProps","innerHTML","_s","components_tips_tips","tips_normalizeComponent","Tips","extend","LayerTips","install","options","type","undefined","instance","$mount","document","body","appendChild","nextTick","arguments","prototype","VueCookie","animated","countDownTime","config","productionTip","el","router","components","template","map","./exchange.vue","./index.vue","./mall.vue","./order.vue","webpackAsyncContext","req","ids","then","Promise","reject","Error","keys","service","axios","create","timeout","interceptors","request","headers","Authorization","error","response","responseType","array","blob","Blob","reader","FileReader","readAsText","onload","message","__webpack_exports__","query","fetch","url","BaseUrl","method","PATH_HEAD","Hard_Ware","userId","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","_import","Router","routes","redirect","component","removeItem","timerToken"],"mappings":"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","file":"static/js/app.c8b27270c23542001116.js","sourcesContent":["module.exports = file => () => import('@/views/' + file + '.vue')\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/_import_production.js","<template>\n    <div id=\"app\">\n        <transition name=\"sliderRight\">\n            <router-view/>\n        </transition>\n    </div>\n</template>\n\n<script>\nimport * as api from '@/api/api';\nimport {setTokenTime} from '@/utils/comm'\nexport default {\n    name: 'App',\n    data(){\n        return{\n            timeSwipe:Object,\n            timeSwallow:Object, \n        }\n    },\n    watch: {\n        $route(to,from) {\n            // console.log(to,from,\"to,from\")\n        }\n    },\n    mounted(){\n        setTokenTime();\n        try{\n            let ipc = window.require('electron').ipcRenderer;\n            ipc.send('openServer');\n        }catch(e){\n            console.log(\"非桌面应用启动\")\n        }\n        this.getServer();\n    },\n    methods:{\n        /** \n         * 判断server是否已经启动 \n         */\n        async getServer(){\n            try{\n                console.log(\"111222\")\n                if(await api.getPid()){\n                    let isInit = await this.openPort() ;\n                    // 内容穿透工具初始化\n                }else{\n                    setTimeout(this.getServer(),1000)\n                }\n            }catch(e){\n                this.getServer()\n            }\n            \n        },\n        /**\n         * 初始化打开所有串口\n         */\n        async openPort(){\n            \n\n            // 吞卡口识别串口\n            this.$LayerTips({content:'系统初始化请稍后',time:2000});\n\n            const resClosePort = await Promise.all([api.closeSwipe(),api.closeSwipe2()]);\n            // 初始化3个串口 无论成功与否继续调用轮询（轮询通过代表串口已经开启）\n            const resOpnePort = await Promise.all([api.openSwipe(),api.openSwipe2(),api.openSwallow()]);\n\n            \n            // 调用轮询接口\n            const [result1, result2] = await Promise.all([api.pollingSwallow(), api.pollingSwipe()]);\n\n            console.log(result1,result2,\"Promise.all的返回\")\n            if(result1.resultCode==-3 || result2.resultCode==-3){\n                this.$LayerTips({content:'设备初始化失败<br>请联系管理员<br>',time:2000});\n                setTimeout(this.openPort(),2000)\n                return false\n            }\n\n            // let res = await api.openSwipe();\n            // if(res.resultCode!=1){\n            //     // this.$LayerTips({content:'串口启动失败，检查机器设备',time:4000});\n            //     this.$LayerTips({content:'设备初始化失败<br>请联系管理员',time:0});\n            //     return false\n            // }\n\n            // // 身份卡识别串口\n            // // res = await api.openSwipe2();\n            // // if(res.resultCode!=1){\n            // //     // this.$LayerTips({content:'串口启动失败，检查机器设备',time:4000});\n            // //     this.$LayerTips({content:'设备初始化失败<br>请联系管理员',time:0});\n            // //     return false\n            // // }\n\n            // // 吞卡机器串口\n            // res = await api.openSwallow();\n            // if(res.resultCode!=1){\n            //     // this.$LayerTips({content:'串口启动失败，检查机器设备',time:4000});\n            //     this.$LayerTips({content:'设备初始化失败<br>请联系管理员',time:0});\n            //     return false\n            // }\n            \n            this.initPolling()  \n            console.log(\"3个串口都已启动\")\n            return true\n        },\n        /**\n         * 轮询 2个读卡口 (身份口,吞卡及读卡口)\n         */\n        async initPolling(){\n            // 初始化关闭吞卡口\n            let optres = await api.noUse();\n            clearInterval(this.timeSwipe);\n            this.timeSwipe = setInterval(async () => {\n                await this.isSwipeCard()\n            }, 1000);\n\n            clearInterval(this.timeSwallow);\n            this.timeSwallow = setInterval(async () => {\n                await this.isSwallowCard()\n            }, 1000);\n        },\n\n        /**\n         * 身份卡串口调用方法 （轮询） \n         * 相关操作会开启身份卡识别串口然后把状态调整为 1 等待刷卡 \n         * this.$store.dispatch(\"SetSwipeState\",1);\n         * 然后调用pollingSwipe方法,返回读卡机读取到的卡号 res.value\n         */\n        async isSwipeCard(){\n            // 如浏览器缓存没有 token 就返回到主页。\n            if(!window.localStorage.getItem('token')){\n                if(this.$router.currentRoute.path.indexOf(\"index\")==-1){\n                    this.$router.push({path:'/'});\n                };\n            }\n            // swipeState （状态为1 是等待刷卡状态） \n            if(this.$store.getters.swipeState!=0){\n                console.log(this.$store.getters.swipeState,\"this.$store.getters.swipeState\")\n                let res = await api.pollingSwipe();\n                console.log(res,\"获取了身份卡卡号\");\n                // 测试\n                // let res = {}\n                // res.resultCode = 1\n                // res.value = '123456'\n                if(res.resultCode==1){\n                    // 已经获取卡号 等待状态取消\n                    this.$store.dispatch(\"SetSwipeState\",0);\n                    if(this.$store.getters.confirmExchange){\n                        // 商城页面用户确认\n                        this.checkUser(res.value)\n                    }else{\n                        // 首页获取用户信息\n                        this.getStudentInfo(res.value)\n                    }\n                }\n                return false\n            }\n            return false\n        },\n        /**\n         * 获取用户信息\n         */\n        async getStudentInfo(cardNo){\n            let params = {}\n            // let TimeStr = '10s';\n            params.cardNo = cardNo;\n            try{\n                let res = await api.getStudentInfo(params);\n                // 测试用户 何媛媛 \n                // res.userCode = \"4171215144345740\"\n                if(res.resultCode!=1){\n                    console.log(\"6666699999\");\n                    this.$store.dispatch(\"SetErrorState\",true);\n                    return;\n                }\n                console.log(res.value,\"res.value\")\n                let resObj = JSON.parse(res.value);\n                \n                // 记录用户id 和 头像到浏览器缓存\n                window.localStorage.setItem('card_No',cardNo)\n                window.localStorage.setItem(\"card_userid\",resObj.userCode)\n                window.localStorage.setItem(\"card_oauserid\",(\"3\"+resObj.userCode.substr(1,resObj.userCode.length)))\n                window.localStorage.setItem(\"card_useravatar\",resObj.avatar)\n                window.localStorage.setItem('xxdm',resObj.schoolCode)\n\n                // this.$cookie.set(\"card_userid\",res.userCode);\n                // this.$cookie.set(\"card_oauserid\",res.userCode.replace(\"4\",\"3\"));\n                // this.$cookie.set(\"card_useravatar\",res.avatar);  \n                // this.$cookie.set(\"card_oauserid\",res.userCode.replace(\"4\",\"3\"),{expires:'6000s'});\n                // schoolCode=1544&studentId=3171215144345740\n\n                // 通过用户ID获取 用户token\n                let tokenRes = await api.getToken({xxdm:window.localStorage.getItem('xxdm'),usercode:(\"4\"+resObj.userCode.substr(1,resObj.userCode.length)),platform:0});\n                if(tokenRes.status==200){\n                    // this.$cookie.set(\"token\",tokenRes.data,{expires:TimeStr})\n                    window.localStorage.setItem('token',tokenRes.data)\n                    // 启动token倒计时 10秒后清空token\n                    // setTokenTime();\n                }else{\n                    // 错误状态显示\n                    this.$store.dispatch(\"SetErrorState\",true);\n                }\n\n                // 获取用户详细信息\n                let stuRes = await api.getStudentDetail({schoolCode:window.localStorage.getItem('xxdm'),studentId:window.localStorage.getItem(\"card_oauserid\")});\n                console.log(stuRes,\"stuRes\")\n                if(stuRes.resultCode==1){\n                    // 保存用户各种信息（班级id，班级名称，年级id，持卡人姓名）\n                    window.localStorage.setItem(\"classId\",stuRes.value.classId)\n                    window.localStorage.setItem(\"className\",stuRes.value.className)\n                    window.localStorage.setItem(\"gradeId\",stuRes.value.gradeId)\n                    window.localStorage.setItem(\"card_username\",stuRes.value.name)\n                    // this.$cookie.set(\"classId\",stuRes.value.classId);\n                    // this.$cookie.set(\"className\",stuRes.value.className);\n                    // this.$cookie.set(\"gradeId\",stuRes.value.gradeId);\n                    // this.$cookie.set(\"card_username\",stuRes.value.name)\n                }else{\n                    // 错误状态显示\n                    this.$store.dispatch(\"SetErrorState\",true);\n                }\n                // 2190604155141213 ,4171215144345740\n                // 读卡完毕状态\n                this.$store.dispatch(\"SetSwipeComplete\",true); \n            }catch(e){\n                this.$store.dispatch(\"SetErrorState\",true);\n            }\n        },\n        checkUser(cardNo){\n            // cardNo = \"4171215144345740\"\n            if(cardNo == window.localStorage.getItem(\"card_No\")){\n                console.log(\"用户是同一个,确认通过\")\n                this.$store.dispatch(\"SetCheckComplete\",true);\n            }else{\n                console.log(\"不是同一个用户\")\n                this.$store.dispatch(\"SetErrorState\",true);\n            }\n        },\n        /***\n         * 轮询吞卡机 swallowState=1 打开轮询 =0直接跳出\n         */\n        async isSwallowCard(){\n            if(this.$store.getters.swallowState!=0){\n                let res = await api.pollingSwallow();\n                // console.log(\"这里轮询吞卡口\")\n                if(res.resultCode==1){\n                    // console.log(res,\"res\")\n                    // 停止吞吐卡机\n                    this.$store.dispatch(\"SetSwallowState\",0);\n                    // 读到卡号的标识置为true\n                    this.$store.dispatch(\"SetSwallowComplete\",true);\n                    // 当前卡号写入缓存\n                    window.localStorage.setItem(\"card_No\",res.value);\n                    // 已经获取卡号 等待状态取消\n                    // this.$store.dispatch(\"SetSwallowState\",0);\n                    console.log(\"已经读到了卡片\")\n                    // this.getStudentInfo(res.value)\n                    // return res.value\n                }\n                return false\n            }\n            return false\n        },\n\n        async getTokenTest(){\n            let usercode_t = \"40190423170521425\" \n            window.localStorage.setItem(\"card_userid\",usercode_t)\n            window.localStorage.setItem(\"card_oauserid\",usercode_t.replace(\"4\",\"3\"))\n            let tokenRes = await api.getToken({xxdm:'1544',usercode:usercode_t,platform:0});\n            if(tokenRes.status==200){\n                window.localStorage.setItem('token',tokenRes.data)\n                // setTokenTime();\n                return true\n            }else{\n                return false\n            }\n        },\n    }\n}\n</script>\n\n<style>\n@import './assets/css/base.scss';\n.tipsBox a{\n    text-decoration: none;\n    color: #F90;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":\"sliderRight\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f0b6c8a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f0b6c8a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f0b6c8a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Cookies from 'js-cookie';\r\n\r\nconst app = {\r\n  state: {\r\n    swipeState:0,\r\n    swallowState:0,\r\n    machineState:false,\r\n    swipeComplete:false,\r\n    swallowComplete:false,\r\n    errorState:false,\r\n    confirmExchange:false,\r\n    checkComplete:false,\r\n  },\r\n  mutations: {\r\n    Set_SwipeState:(state,view) => {\r\n      state.swipeState = view;\r\n    },\r\n    Set_SwallowState:(state,view) => {\r\n      state.swallowState = view;\r\n    },\r\n    Set_MachineState:(state,view) => {\r\n      state.machineState = view;\r\n    },\r\n    Set_SwallowComplete:(state,view) => {\r\n      state.swallowComplete = view;\r\n    },\r\n    Set_SwipeComplete:(state,view) => {\r\n      state.swipeComplete = view;\r\n    },\r\n    Set_ErrorState:(state,view) => {\r\n      state.errorState = view;\r\n    },\r\n    Set_ConfirmExchange:(state,view) => {\r\n      state.confirmExchange = view;\r\n    },\r\n    Set_CheckComplete:(state,view) => {\r\n      state.checkComplete = view;\r\n    },\r\n  },\r\n  actions: {\r\n    SetSwipeState: ({ commit } , view) => {\r\n      commit('Set_SwipeState',view)\r\n    },\r\n    SetSwallowState: ({ commit } , view) => {\r\n      commit('Set_SwallowState',view)\r\n    },\r\n    SetMachineState: ({ commit } , view) => {\r\n      commit('Set_MachineState',view)\r\n    },\r\n    SetSwipeComplete: ({ commit } , view) => {\r\n      commit('Set_SwipeComplete',view)\r\n    },\r\n    SetSwallowComplete: ({ commit } , view) => {\r\n      commit('Set_SwallowComplete',view)\r\n    },\r\n    SetErrorState: ({ commit } , view) => {\r\n      commit('Set_ErrorState',view)\r\n    },\r\n    SetConfirmExchange: ({ commit } , view) => {\r\n      commit('Set_ConfirmExchange',view)\r\n    },\r\n    SetCheckComplete: ({ commit } , view) => {\r\n      commit('Set_CheckComplete',view)\r\n    },\r\n  }\r\n};\r\n\r\nexport default app;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/app.js","\r\n\r\nconst getters = {\r\n  errorState: state => state.app.errorState,\r\n  swipeState: state => state.app.swipeState,\r\n  swallowState: state => state.app.swallowState,\r\n  machineState: state => state.app.machineState,\r\n  swipeComplete: state => state.app.swipeComplete,\r\n  swallowComplete: state => state.app.swallowComplete,\r\n  confirmExchange: state => state.app.confirmExchange,\r\n  checkComplete: state => state.app.checkComplete,\r\n};\r\nexport default getters\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport app from './modules/app';\r\nimport getters from './getters';\r\n\r\n\r\nVue.use(Vuex);\r\n\r\nconst store = new Vuex.Store({\r\n  modules: {\r\n    app\r\n  },\r\n  getters\r\n});\r\n\r\nexport default store\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","<template>\r\n    <div class=\"tipsBox\">\r\n        <transition name=\"tips\" @after-leave=\"handleAfterLeave\">\r\n            <div class=\"hDialog\" v-show=\"visible\">\r\n                <div v-html=\"content\"></div>\r\n            </div>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"MyMessage\",\r\n    data() {\r\n        return {\r\n            content: '',\r\n            time: 3000,\r\n            visible: false,\r\n            // isClass:'',\r\n        }\r\n    },\r\n    mounted() {\r\n        if(this.time!=0){\r\n            this.close()\r\n        }\r\n    },\r\n    methods: {\r\n        handleAfterLeave() {\r\n            this.$destroy(true);                        //完全销毁一个实例。清理它与其它实例的连接，解绑它的全部指令及事件监听器。\r\n            this.$el.parentNode.removeChild(this.$el);\r\n        },\r\n        close() {\r\n            window.setTimeout(() =>{\r\n                this.visible = false\r\n            }, this.time);\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tipsBox{\r\n    width:100%; \r\n    height:100%;\r\n    top:0;\r\n    left:0;\r\n    position:fixed;\r\n    z-index:500;\r\n    background:rgba(0, 0, 0, .6);\r\n    display: flex;//flex布局\r\n    justify-content: center;//x轴排列\r\n    align-items: center;//y轴排列\r\n}\r\n.hDialog{\r\n    // width:60%;\r\n    min-width: 30%;\r\n    padding: .4rem .2rem;\r\n    line-height: 2em;\r\n    background: #FFF;\r\n    box-shadow: 0 0 .05rem rgba(0, 0, 0, .1);\r\n    position: fixed;\r\n    z-index: 550;\r\n    // top:50%;\r\n    // left: 50%;\r\n    // transform: translate(-50%,-50%);\r\n    text-align: center;\r\n    font-size: .34rem;\r\n    color: #262626;\r\n    border-radius: .2rem;\r\n}\r\n.tips-enter-active {\r\n    animation-name: fadeInRight;\r\n    animation-duration: .5s;\r\n}\r\n\r\n.tips-leave-active {\r\n    animation-name: fadeOutLeft;\r\n    animation-duration: 1s;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/tips/tips.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tipsBox\"},[_c('transition',{attrs:{\"name\":\"tips\"},on:{\"after-leave\":_vm.handleAfterLeave}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"hDialog\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-641ae3e0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tips/tips.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-641ae3e0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tips.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tips.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tips.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-641ae3e0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tips.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-641ae3e0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tips/tips.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport LayerTips from './tips.vue'\r\n\r\nconst Tips = Vue.extend(LayerTips)                      //Vue实例构造器,用来生成组件\r\n\r\nTips.install = function (options, type) {               //options  父组件的传参\r\n    if (options === undefined || options === null) {\r\n        options = {\r\n            content: ''\r\n        }\r\n    } else if (typeof options === 'string' || typeof options === 'number') {\r\n        options = {\r\n            content: options\r\n        }\r\n        if (type != undefined && options != null) {\r\n            options.type = type;\r\n        }\r\n    }\r\n\r\n    let instance = new Tips({                           //创建 Tips 实例，并挂载到一个元素上。  在实例挂载之后，元素可以用 vm.$el 访问。\r\n        data: options\r\n    }).$mount()                                     //手动挂载\r\n\r\n    document.body.appendChild(instance.$el)   \r\n\r\n    Vue.nextTick(() => {            // DOM 更新了\r\n        instance.visible = true\r\n    })\r\n}\r\n\r\nexport default Tips\n\n\n// WEBPACK FOOTER //\n// ./src/components/tips/index.js","\r\nimport LayerTips from '@/components/tips';\r\n\r\n\r\n\r\nimport Vue from 'vue'\r\nconst components = [\r\n]\r\n\r\nconst install = function(Vue, opts = {}) {\r\n    // components.forEach(component => {\r\n    //     Vue.component(component.name, component);\r\n    // });\r\n\r\n    Vue.prototype.$LayerTips = LayerTips.install\r\n};\r\n\r\n\r\n// if (typeof window !== 'undefined' && window.Vue) {\r\n//     install(window.Vue);\r\n// }\r\ninstall(Vue);\r\n\r\n// import LayerTips from '@/components/tips/index.js';\r\n// export default LayerTips;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from './store';\nimport animated from 'animate.css' // npm install animate.css --save安装，在引入\nimport './components/index.js'\nimport VueCookie from 'vue-cookie'\n\nVue.use(VueCookie);\nVue.use(animated)\n\nwindow.countDownTime = 0;\n\n\nVue.config.productionTip = false\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var map = {\n\t\"./exchange.vue\": [\n\t\t\"oT9y\",\n\t\t0\n\t],\n\t\"./index.vue\": [\n\t\t\"8hXn\",\n\t\t3\n\t],\n\t\"./mall.vue\": [\n\t\t\"aFB9\",\n\t\t1\n\t],\n\t\"./order.vue\": [\n\t\t\"vF69\",\n\t\t2\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"Opzk\";\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views lazy ^\\.\\/.*\\.vue$\n// module id = Opzk\n// module chunks = 5","import axios from 'axios';\r\nimport Vue from 'vue';\r\nimport {setTokenTime,clearTime} from '@/utils/comm'\r\n\r\n// import VueCookie from 'vue-cookie'\r\n// import Tips from '@/components/index.js';\r\n// import Cookies from 'js-cookie'\r\n\r\n// 创建axios实例\r\nconst service = axios.create({\r\n  // baseURL: process.env.BASE_API, // api的base_url\r\n  timeout: 20000 // 请求超时时间\r\n});\r\n\r\n// request拦截器\r\nservice.interceptors.request.use(config => {\r\n    if(window.localStorage.getItem('token')){\r\n      // setTokenTime();\r\n    }\r\n    // console.log(Cookies.get('token'))\r\n    if(window.localStorage.getItem('token')){\r\n        config.headers.Authorization = window.localStorage.getItem('token'); \r\n    }\r\n    // console.log(config)\r\n    return config;\r\n}, error => {\r\n  // Do something with request error\r\n  // console.log(error); // for debug\r\n    Promise.reject(error);\r\n})\r\n\r\n// respone拦截器\r\nservice.interceptors.response.use(\r\n  response => {\r\n    /**\r\n     * 下面的注释为通过response自定义code来标示请求状态，当code返回如下情况为权限有问题，登出并返回到登录页\r\n     * 如通过xmlhttprequest 状态码标识 逻辑可写在下面error中\r\n     */\r\n    const res = response.data;\r\n    if (response.status === 401 || res.status === 40101) {\r\n      return Promise.reject('error');\r\n    }\r\n    if (res.status === 40301) {\r\n      return Promise.reject('error');\r\n    }\r\n    if (response.status !== 200 && res.status !== 200) {\r\n      Vue.prototype.$LayerTips({content:'加载信息出错',time:2000});\r\n    } else {\r\n      return response.data;\r\n    }\r\n  },\r\n  error => {\r\n    \r\n    // Vue.prototype.$LayerTips({content:'response.exceptions',time:200000});\r\n    if (error.response.request.responseType == 'arraybuffer') {\r\n      const array = error.response.data;\r\n      const blob = new Blob([array]);\r\n      const reader = new FileReader();\r\n      reader.readAsText(blob, 'utf-8');\r\n      reader.onload = function(e) {\r\n\r\n        \r\n        // Notification({\r\n        //   title: '错误',\r\n        //   message: reader.result,\r\n        //   type: 'error',\r\n        //   duration: 5 * 1000\r\n        // });\r\n        // Message({\r\n        //   message: reader.result,\r\n        //   type: 'error',\r\n        //   duration: 5 * 1000\r\n        // });\r\n      }\r\n    } else {\r\n      let message = error.message;\r\n      if (error.response && error.response.data) {\r\n        message = error.response.data;\r\n        const status = error.response.status;\r\n        if (status === 401) {\r\n        } else {\r\n          Vue.prototype.$LayerTips({content:'访问数据出错',time:2000});\r\n        }\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/fetch.js","import fetch from '../utils/fetch';\r\n\r\nconst PATH_HEAD = '/evaluation';\r\nlet Hard_Ware = '';\r\nlet BaseUrl = '';\r\nlet SstUrl = '';\r\n// if(process.env.NODE_ENV == \"development\"){\r\n//     Hard_Ware = '/HardWare';\r\n// }else{\r\n    Hard_Ware = 'http://localhost:5555';\r\n    // Hard_Ware = 'http://192.168.0.31:5555'\r\n    BaseUrl = 'http://oa.91118.com:8765/api';\r\n    // BaseUrl = 'http://192.168.3.20:8765/api';\r\n    SstUrl = 'http://115.236.5.90:8081';\r\n// }\r\n\r\n\r\n\r\n/** 获取token **/\r\nexport function getToken(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}/auth/jwt/xxtToken`,\r\n        method: 'POST',\r\n        params: query\r\n    });\r\n}\r\n\r\n/** 获取基础数据 **/\r\nexport function getStudentDetail(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}/base/baseApi/getStudentDetail`,\r\n        method: 'get',\r\n        params: query\r\n    });\r\n}\r\n\r\nexport function atmRecordSave(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/atmRecord/save`,\r\n        method: 'POST',\r\n        data: query\r\n    });\r\n}\r\n\r\n\r\n/** 商品-类别列表 **/\r\nexport function getGoodsTypeList(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/goodsType/list`,\r\n        method: 'get',\r\n        params: query\r\n    });\r\n}\r\n\r\n\r\n/** 商品-分页列表 **/\r\nexport function getGoodsListPage(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/goods/listPage`,\r\n        method: 'post',\r\n        data: query\r\n    });\r\n}\r\n\r\n/** 获取商品订单列表 **/\r\nexport function getGoodsOrder(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/goodsOrder/listPage`,\r\n        method: 'post',\r\n        data: query\r\n    });\r\n}\r\n\r\n\r\n/** 打开刷卡串口 **/\r\nexport function openSwipe() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/openrc`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 打开身份识别串口 **/\r\nexport function openSwipe2() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/userOpenPort`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 关闭串口——1 **/\r\nexport function closeSwipe() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/closerc`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 关闭串口——2 **/\r\nexport function closeSwipe2() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/userClosePort`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n/** 打开吞卡机串口 **/\r\nexport function openSwallow() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/opencardport`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 轮询刷卡接口 userGetCard **/  \r\nexport function pollingSwipe() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/userGetCard`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 轮询吞卡接口 **/\r\nexport function pollingSwallow() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/getcard`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 吞卡接口 **/\r\nexport function intocard() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/intocard`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 吐卡接口 **/\r\nexport function outcard() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/outcard`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 关闭吞卡 **/\r\nexport function noUse() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/noUse`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 打开吞卡 **/\r\nexport function canUse() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/canUse`,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 打开吞卡 **/\r\nexport function getPid() {\r\n    return fetch({\r\n        url: `${Hard_Ware}/getPid`,\r\n        method: 'get',\r\n    });\r\n}\r\n\r\n/** 兑换勋章商品 **/\r\nexport function exchange(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/goodsOrder/exchange`,\r\n        method: 'POST',\r\n        data: query\r\n    });\r\n}\r\n\r\n/** 获取用户勋章基础信息 **/\r\nexport function getUserMedalInfo(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/characterItem/getUserMedalInfo`,\r\n        method: 'get',\r\n        params: query\r\n    });\r\n}\r\n\r\n/** 获取用户积分信息 **/\r\nexport function getUserScoreMedalInfo(query) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/reportCard/getStuEvaluationData/`+query.userId,\r\n        method: 'get',\r\n    });\r\n}\r\n\r\n/** 获取师生通学生基本信息 **/\r\nexport function getStudentInfo(params) {\r\n    return fetch({\r\n        url: `${Hard_Ware}/GetStudentInfoByCard?school=`+params.xxdm+`&card=`+params.cardNo,\r\n        method: 'post',\r\n    });\r\n}\r\n\r\n/** 获取抵消卡列表 **/\r\nexport function getRemindVOList(params) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/remindRecord/getEvaluationRemindVO`,\r\n        method: 'get',\r\n        params:params\r\n    });\r\n}\r\n\r\n/** 抵消卡 **/\r\nexport function deductionByEvaluation(params) {\r\n    return fetch({\r\n        url: `${BaseUrl}${PATH_HEAD}/remindRecord/deductionByEvaluation`,\r\n        method: 'get',\r\n        params:params\r\n    });\r\n}\r\n\r\n// http://115.236.5.90:8081/api/Student/GetStudentInfoByCard/1544/333399979\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/api.js","import Vue from 'vue'\nimport Router from 'vue-router'\nconst _import = require('./_import_' + process.env.NODE_ENV);\n\nVue.use(Router)\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      redirect:'/index'\n    },{\n      path: '/index',\n      component: _import('index'),\n      name: 'index',\n    },{\n      path: '/mall',\n      component: _import('mall'),\n      name: 'mall',\n    },{\n      path: '/order',\n      component: _import('order'),\n      name: 'order',\n    },{\n      path: '/exchange',\n      component: _import('exchange'),\n      name: 'exchange',\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import routers from '../router'\r\n\r\nexport function setTokenTime(){\r\n    // console.log(routers,\"routers\")\r\n    // console.log(timerToken,'set里的timerToken')\r\n    // clearTimeout(timerToken);\r\n    window.countDownTime = 30;\r\n    // console.log(\"定时开启\")\r\n    // timerToken = setTimeout(function(){\r\n    //     // console.log(\"定时结束关闭\")\r\n    //     window.localStorage.removeItem(\"token\");\r\n    //     clearTimeout(timerToken);\r\n    //     // routers.push({'path':'/'});\r\n    //     // window.location.href='/';\r\n    // },300000);\r\n}\r\n\r\nexport function clearTime(){\r\n    // console.log(timerToken,'clear里的timerToken');\r\n    // console.log(\"这里清空了定时器\");\r\n    window.localStorage.removeItem(\"token\");\r\n    // clearTimeout(timerToken);\r\n    timerToken = null\r\n    return;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/comm.js"],"sourceRoot":""}